let mouseDownPos = null;

document.addEventListener('mousedown', function(e) {
    if (e.button !== 0) return; // Only left click
    if (e.target.classList.contains('pgc-img')) {
        mouseDownPos = { x: e.clientX, y: e.clientY };
    }
});

document.addEventListener('mouseup', function(e) {
    if (e.button !== 0) return; // Only left click
    if (e.target.classList.contains('pgc-img') && mouseDownPos) {
        const dx = e.clientX - mouseDownPos.x;
        const dy = e.clientY - mouseDownPos.y;
        const distance = Math.sqrt(dx * dx + dy * dy);

        // Only trigger close if it's a click, not a drag
        if (distance < 5) {
            const closeBtn = document.querySelector('.pgc-rev-item-menu-button[data-type="close"]');
            if (closeBtn) {
                closeBtn.click();
                document.body.classList.remove('lightbox-open'); // update cursor class
            }
        }

        mouseDownPos = null;
    }
});